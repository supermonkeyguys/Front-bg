


## 进程（Process）

- 进程是操作系统资源分配的基本单位
- 每个进程有独立的内存空间（代码段、数据段、堆、栈、文件描述符、环境变量等）
- 进程之间相互隔：一个进程崩溃通常不会影响其他进程
- 启动一个程序（如 Chrome、VScode）就创建了一个进程

>**例子：打开三个 Chrome 窗口，可能有 1 个主进程 + 多个渲染进程（多进程架构）。**


## 线程（Thread）

- 线程是 CPU 调度的基本单位（即 "执行流"）
- 一个进程可以包含多个线程，他们共享进程的内存空间（堆、全局变量、文件句柄等）
- 每个线程都有自己的独立栈（用于函数调用、局部变量）
- 线程之间通信更高效（直接读写共享内存），但也更容易出错（如：竞态条件）

>**例子：Word 在拼写检查时，一个线程响应用户输入，另一个后台线程检查语法。**



## 对比


| 特性        | 进程（PROCESS）          | 线程（THREAD）          |
| --------- | -------------------- | ------------------- |
| 资源占用      | 高（独立内存空间）            | 低（共享进程资源）           |
| 创建 / 销毁开销 | 大（需分配内存、加载代码）        | 小（只需分配栈）            |
| 通信方式      | IPC（管道、消息队列、Socket等） | 直接读写共享内存            |
| 隔离性       | 强（崩溃不影响其他进程）         | 弱（一个线程崩溃可能导致整个进程崩溃） |
| 安全性       | 高（内存隔离）              | 低（需同步机制保护共享数据）      |
| 切换开销      | 大（需切换内存上下文）          | 小（同进程内切换快）          |
| 数量限制      | 受系统内存限制（通常几百~几千）     | 受栈大小和系统限制（可成千上万）    |


## 关系

```plaintext
计算机
└── 操作系统
    └── 进程 A（独立内存空间）
        ├── 线程 1（栈1）
        ├── 线程 2（栈2）
        └── 线程 3（栈3）
    └── 进程 B（独立内存空间）
        ├── 线程 1（栈1）
        └── 线程 2（栈2）
```

- **一个进程至少有一个主线程**。
- **线程不能脱离进程存在**。
- **多线程 = 一个进程内多个执行流并发运行**。



## 区别


### 内存模型

- **进程**：彼此隔离，A 进程不能直接访问 B 进程的变量
- **线程**：共享进程的堆和全局变量，但每个线程都有自己的栈

### 并发 vs 并行

- **并发（Concurrency）**：多个任务交替执行（单核 CPU 模拟多任务）
- **并行（Parallelism）**：多个任务真正同时执行（多核 CPU）
- **进程和线程都可实现并发 / 并行，但线程更适合并行运算（因为通信开销小）**

### 同步问题

- **进程间通信天然安全（需显式 IPC）**
- **线程间共享内存，必须使用同步机制：**
	- 互斥锁（Mutex）
	- 信号量（Semaphore）
	- 条件变量（Condition Variable）
	- 原子操作（Atomic）

没有同步的多线程程序 = 赛博抽奖（结果不可预测）！

![[Pasted image 20251111221319.png]]


**进程是“资源容器”，线程是“执行单元”**。  
进程提供**隔离与安全**，线程提供**高效并发**。  
选择多进程还是多线程，取决于你的应用对 **隔离性、性能、复杂度** 的权衡。